<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Happy Birthday Animation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Caslon-style italic font -->
  <link href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:ital@1&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    body {
      background-image: url('bg.jpg');
      margin: 0;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
    }

    /* Start overlay */
    #startOverlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      color: #fff6e6;
      font-family: 'Libre Caslon Text', serif;
      font-style: italic;
      font-size: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 9999;
      text-shadow: 0 0 25px rgba(255, 200, 150, 0.7);
      flex-direction: column;
    }

    #startOverlay span {
      font-size: 20px;
      margin-top: 15px;
      opacity: 0.8;
    }

    /* Elegant "Happy Birthday" text */
    .birthday-text {
      font-family: 'Libre Caslon Text', serif;
      font-style: italic;
      font-size: 100px;
      color: #fff6e6;
      letter-spacing: 2px;
      text-shadow: 0 0 20px rgba(255, 215, 180, 0.6), 0 0 45px rgba(255, 165, 90, 0.45);
      opacity: 0;
      transform: scale(0.1);
      animation: zoomInOut 3s ease-out forwards;
      position: absolute;
      z-index: 5;
    }

    @keyframes zoomInOut {
      0% { opacity: 0; transform: scale(0.1); }
      40% { opacity: 1; transform: scale(1.2); }
      60% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(1); }
    }

    .central-image-container {
      position: relative;
      width: 700px;
      height: 600px;
      display: none;
      justify-content: center;
      align-items: center;
      border-radius: 30px;
      box-shadow: 0 4px 36px rgba(0,0,0,0.33);
      background-image: url('bn.jpg');
      overflow: hidden;
      animation: fadeIn 1.5s ease-in-out forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    .central-image {
      width: 220px;
      height: 300px;
      border-radius: 22px;
      box-shadow: 0 2px 18px #222;
      object-fit: cover;
      z-index: 2;
      opacity: 0;
      animation: openCenter 1.5s ease-out forwards;
      animation-delay: 1s;
    }

    @keyframes openCenter {
      0% { transform: scale(0); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .floating-png {
      position: absolute;
      width: 150px;
      height: 150px;
      pointer-events: none;
      opacity: 1;
    }

    .fp1 { top: 250px; left: 12px; animation: float1 4.7s infinite ease-in-out; }
    .fp2 { top: 220px; right: 12px; animation: float2 5.2s infinite ease-in-out; }
    .fp3 { bottom: 5px; left: 50px; animation: float3 6.2s infinite ease-in-out; }
    .fp4 { bottom: 5px; right: 250px; animation: float4 5.7s infinite ease-in-out; }
    .fp5 { left: 70px; top: 20px; animation: float5 4.9s infinite ease-in-out; }
    .fp6 { top: 1px; right: 250px; animation: float6 6.5s infinite ease-in-out; }
    .fp9 { bottom: 5px; left: 500px; animation: float9 5.4s infinite ease-in-out; }
    .fp10 { top: 20px; right: 70px; animation: float9 5.4s infinite ease-in-out; }

    @keyframes float1 { 0%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(-30px) rotate(-12deg);}100%{transform:translateY(0) rotate(0deg);} }
    @keyframes float2 { 0%{transform:translateY(0) rotate(3deg);}40%{transform:translateY(32px) rotate(-8deg);}100%{transform:translateY(0) rotate(3deg);} }
    @keyframes float3 { 0%{transform:translateY(0);}60%{transform:translateY(-20px) rotate(9deg);}100%{transform:translateY(0);} }
    @keyframes float4 { 0%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(23px) rotate(13deg);}100%{transform:translateY(0) rotate(0deg);} }
    @keyframes float5 { 0%{transform:translateY(0);}35%{transform:translateY(-19px) rotate(-5deg);}100%{transform:translateY(0);} }
    @keyframes float6 { 0%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(-25px) rotate(8deg);}100%{transform:translateY(0) rotate(0deg);} }
    @keyframes float9 { 0%{transform:translateY(0);}55%{transform:translateY(-28px) rotate(9deg);}100%{transform:translateY(0);} }
  </style>
</head>

<body>
  <!-- Start Overlay -->
  <div id="startOverlay">
    Click to Begin ðŸŽ¶
    <span>(turn up your volume!)</span>
  </div>

  <!-- Audio -->
  <audio id="birthdayAudio" src="saxx.mp3" preload="auto"></audio>

  <!-- Text -->
  <div class="birthday-text">Happy Birthday Enid!</div>

  <!-- Main Container -->
  <div class="central-image-container" id="mainContainer">
    <img src="sax.jpg" class="central-image" alt="Center Image"/>
    <img src="n1-removebg-preview.png" class="floating-png fp1"/>
    <img src="n2-removebg-preview.png" class="floating-png fp2"/>
    <img src="n3-removebg-preview.png" class="floating-png fp3"/>
    <img src="n4-removebg-preview.png" class="floating-png fp4"/>
    <img src="n5-removebg-preview.png" class="floating-png fp5"/>
    <img src="n6-removebg-preview.png" class="floating-png fp6"/>
    <img src="n8-removebg-preview.png" class="floating-png fp9"/>
    <img src="n7-removebg-preview.png" class="floating-png fp10"/>
  </div>

  <script>
    // Confetti blast
    function fireConfetti() {
      const duration = 2 * 1000;
      const end = Date.now() + duration;
      (function frame() {
        confetti({
          particleCount: 8,
          angle: 60,
          spread: 200,
          origin: { x: 0 }
        });
        confetti({
          particleCount: 8,
          angle: 120,
          spread: 200,
          origin: { x: 1 }
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    }

    // Fade-in audio
    function fadeInAudio(audio, duration) {
  audio.volume = 0;
  const step = 1 / (duration / 100);   // correct ratio
  const fadeInterval = setInterval(() => {
    if (audio.volume < 1) audio.volume = Math.min(1, audio.volume + step);
    else clearInterval(fadeInterval);
  }, 100);
}

    // Handle overlay click (autoplay fix)
    document.getElementById('startOverlay').addEventListener('click', () => {
      const overlay = document.getElementById('startOverlay');
      overlay.style.display = 'none';

      const audio = document.getElementById('birthdayAudio');
      audio.play().then(() => fadeInAudio(audio, 3000)).catch(err => {
        console.warn("Audio play blocked:", err);
      });

      fireConfetti();

      setTimeout(() => {
        document.querySelector('.birthday-text').style.display = 'none';
        document.getElementById('mainContainer').style.display = 'flex';
      }, 3200);
    });
  </script>
</body>
</html>
